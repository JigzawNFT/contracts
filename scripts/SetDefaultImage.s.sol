// SPDX-License-Identifier: AGPL-3.0
pragma solidity ^0.8.24;

import { console2 as c } from "forge-std/Script.sol";
import { JigzawNFT } from "src/JigzawNFT.sol";
import { LotteryNFT } from "src/LotteryNFT.sol";
import { MintSwapPool } from "src/MintSwapPool.sol";
import { ScriptBase } from "./ScriptBase.sol";

contract SetDefaultImage is ScriptBase {
  string constant IMG_SRC = "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48ZyBjbGlwLXBhdGg9InVybCgjYSkiPjxwYXRoIGZpbGw9IiNEOEQ4RDgiIGZpbGwtb3BhY2l0eT0iLjUiIGQ9Ik0wIDBoNTEydjUxMkgweiIvPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0wIDMyMGg2NHY2NEgweiIvPjxwYXRoIGZpbGw9IiNEOUQ5RDkiIGQ9Ik0wIDM4NGg2NHY2NEgwek0wIDBoNjR2NjRIMHoiLz48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMCA2NGg2NHY2NEgweiIvPjxwYXRoIGZpbGw9IiNEOUQ5RDkiIGQ9Ik0wIDEyOGg2NHY2NEgweiIvPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0wIDE5Mmg2NHY2NEgweiIvPjxwYXRoIGZpbGw9IiNEOUQ5RDkiIGQ9Ik0wIDI1Nmg2NHY2NEgweiIvPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik02NCAwaDY0djY0SDY0eiIvPjxwYXRoIGZpbGw9IiNEOUQ5RDkiIGQ9Ik02NCA2NGg2NHY2NEg2NHoiLz48cGF0aCBmaWxsPSIjZmZmIiBkPSJNNjQgMTI4aDY0djY0SDY0eiIvPjxwYXRoIGZpbGw9IiNEOUQ5RDkiIGQ9Ik02NCAxOTJoNjR2NjRINjR6Ii8+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTY0IDI1Nmg2NHY2NEg2NHoiLz48cGF0aCBmaWxsPSIjRDlEOUQ5IiBkPSJNMTI4IDBoNjR2NjRoLTY0eiIvPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0xMjggNjRoNjR2NjRoLTY0eiIvPjxwYXRoIGZpbGw9IiNEOUQ5RDkiIGQ9Ik0xMjggMTI4aDY0djY0aC02NHoiLz48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMTI4IDE5Mmg2NHY2NGgtNjR6Ii8+PHBhdGggZmlsbD0iI0Q5RDlEOSIgZD0iTTEyOCAyNTZoNjR2NjRoLTY0eiIvPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0xOTIgMGg2NHY2NGgtNjR6Ii8+PHBhdGggZmlsbD0iI0Q5RDlEOSIgZD0iTTE5MiA2NGg2NHY2NGgtNjR6Ii8+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTE5MiAxMjhoNjR2NjRoLTY0eiIvPjxwYXRoIGZpbGw9IiNEOUQ5RDkiIGQ9Ik0xOTIgMTkyaDY0djY0aC02NHoiLz48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMTkyIDI1Nmg2NHY2NGgtNjR6Ii8+PHBhdGggZmlsbD0iI0Q5RDlEOSIgZD0iTTI1NiAwaDY0djY0aC02NHoiLz48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMjU2IDY0aDY0djY0aC02NHoiLz48cGF0aCBmaWxsPSIjRDlEOUQ5IiBkPSJNMjU2IDEyOGg2NHY2NGgtNjR6Ii8+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTI1NiAxOTJoNjR2NjRoLTY0eiIvPjxwYXRoIGZpbGw9IiNEOUQ5RDkiIGQ9Ik0yNTYgMjU2aDY0djY0aC02NHoiLz48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMzIwIDBoNjR2NjRoLTY0eiIvPjxwYXRoIGZpbGw9IiNEOUQ5RDkiIGQ9Ik0zMjAgNjRoNjR2NjRoLTY0eiIvPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0zMjAgMTI4aDY0djY0aC02NHoiLz48cGF0aCBmaWxsPSIjRDlEOUQ5IiBkPSJNMzIwIDE5Mmg2NHY2NGgtNjR6Ii8+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTMyMCAyNTZoNjR2NjRoLTY0eiIvPjxwYXRoIGZpbGw9IiNEOUQ5RDkiIGQ9Ik0zODQgMGg2NHY2NGgtNjR6Ii8+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTM4NCA2NGg2NHY2NGgtNjR6Ii8+PHBhdGggZmlsbD0iI0Q5RDlEOSIgZD0iTTM4NCAxMjhoNjR2NjRoLTY0eiIvPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0zODQgMTkyaDY0djY0aC02NHoiLz48cGF0aCBmaWxsPSIjRDlEOUQ5IiBkPSJNMzg0IDI1Nmg2NHY2NGgtNjR6Ii8+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTQ0OCAwaDY0djY0aC02NHoiLz48cGF0aCBmaWxsPSIjRDlEOUQ5IiBkPSJNNDQ4IDY0aDY0djY0aC02NHoiLz48cGF0aCBmaWxsPSIjZmZmIiBkPSJNNDQ4IDEyOGg2NHY2NGgtNjR6Ii8+PHBhdGggZmlsbD0iI0Q5RDlEOSIgZD0iTTQ0OCAxOTJoNjR2NjRoLTY0eiIvPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik00NDggMjU2aDY0djY0aC02NHpNMCA0NDhoNjR2NjRIMHoiLz48cGF0aCBmaWxsPSIjRDlEOUQ5IiBkPSJNNjQgMzIwaDY0djY0SDY0eiIvPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik02NCAzODRoNjR2NjRINjR6Ii8+PHBhdGggZmlsbD0iI0Q5RDlEOSIgZD0iTTY0IDQ0OGg2NHY2NEg2NHoiLz48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMTI4IDMyMGg2NHY2NGgtNjR6Ii8+PHBhdGggZmlsbD0iI0Q5RDlEOSIgZD0iTTEyOCAzODRoNjR2NjRoLTY0eiIvPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0xMjggNDQ4aDY0djY0aC02NHoiLz48cGF0aCBmaWxsPSIjRDlEOUQ5IiBkPSJNMTkyIDMyMGg2NHY2NGgtNjR6Ii8+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTE5MiAzODRoNjR2NjRoLTY0eiIvPjxwYXRoIGZpbGw9IiNEOUQ5RDkiIGQ9Ik0xOTIgNDQ4aDY0djY0aC02NHoiLz48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMjU2IDMyMGg2NHY2NGgtNjR6Ii8+PHBhdGggZmlsbD0iI0Q5RDlEOSIgZD0iTTI1NiAzODRoNjR2NjRoLTY0eiIvPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0yNTYgNDQ4aDY0djY0aC02NHoiLz48cGF0aCBmaWxsPSIjRDlEOUQ5IiBkPSJNMzIwIDMyMGg2NHY2NGgtNjR6Ii8+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTMyMCAzODRoNjR2NjRoLTY0eiIvPjxwYXRoIGZpbGw9IiNEOUQ5RDkiIGQ9Ik0zMjAgNDQ4aDY0djY0aC02NHoiLz48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMzg0IDMyMGg2NHY2NGgtNjR6Ii8+PHBhdGggZmlsbD0iI0Q5RDlEOSIgZD0iTTM4NCAzODRoNjR2NjRoLTY0eiIvPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0zODQgNDQ4aDY0djY0aC02NHoiLz48cGF0aCBmaWxsPSIjRDlEOUQ5IiBkPSJNNDQ4IDMyMGg2NHY2NGgtNjR6Ii8+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTQ0OCAzODRoNjR2NjRoLTY0eiIvPjxwYXRoIGZpbGw9IiNEOUQ5RDkiIGQ9Ik00NDggNDQ4aDY0djY0aC02NHoiLz48cGF0aCBmaWxsPSIjNUM1QzVDIiBkPSJNMTk3LjcgMzUyaDExNS43YzQuOCAwIDguNy0zLjkgOC43LTguN1YyNDVjMC00LjgtMy45LTguNy04LjctOC43aC04LjZ2LTI2YTQ5LjMgNDkuMyAwIDAgMC05OC40IDB2MjZoLTguN2E4LjcgOC43IDAgMCAwLTguNyA4Ljd2OTguNGMwIDQuOCAzLjkgOC43IDguNyA4LjdabTY2LjUtNTV2MTEuNmE4LjcgOC43IDAgMSAxLTE3LjMgMFYyOTdhMTQuNSAxNC41IDAgMSAxIDE3LjMgMFptLTQwLjUtODYuOGEzMS45IDMxLjkgMCAwIDEgNjMuNyAwdjI2aC02My43di0yNloiLz48L2c+PGRlZnM+PGNsaXBQYXRoIGlkPSJhIj48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMCAwaDUxMnY1MTJIMHoiLz48L2NsaXBQYXRoPjwvZGVmcz48L3N2Zz4=";
  
  function run() public {
    Config memory cfg = _getScriptConfig();

    address wallet = cfg.owner;
    c.log("Wallet:", wallet);

    vm.startBroadcast(wallet);

    c.log("Setting default image...");

    JigzawNFT.Config memory jigzawNftConfig = _getJigzawNftConfig(cfg);
    address payable jigzawNftAddress = _getDeployedAddress(type(JigzawNFT).creationCode, abi.encode(jigzawNftConfig));
    JigzawNFT(jigzawNftAddress).setDefaultImage(IMG_SRC);

    c.log("All done");

    vm.stopBroadcast();    
  }
}
